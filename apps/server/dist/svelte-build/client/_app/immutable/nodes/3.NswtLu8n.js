import{c as z,a as u,t as G}from"../chunks/ClanTBNt.js";import{p as rt,b as _,u as st,f as I,a as nt,d,g as t,c as a,r as o,s as n,t as B}from"../chunks/H5THvfYN.js";import{s as h}from"../chunks/C7Gr8Hc1.js";import{i as E}from"../chunks/BmyBH7a9.js";import{f as it,e as ct,C as mt,s as dt}from"../chunks/CyPug0FG.js";import{r as vt,s as F}from"../chunks/zO6XoBfd.js";import{d as ft}from"../chunks/DkFVLFqZ.js";import{b as lt}from"../chunks/BZRg0oC2.js";import{p as g}from"../chunks/DQ4Qeime.js";import{o as pt}from"../chunks/paxaZGAW.js";const ut=async(J,m,e,c,v)=>{if(!t(m))return;if(/^\s*$/.test(t(e))){alert("comments is empty");return}(await fetch("/api/comments",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:t(m).id,contentID:c,comment:t(e)})})).ok&&(d(e,""),await v())};var _t=G("<div>No contents</div>"),ht=G('<div><div><h1> </h1> <img alt="framework-icon" class="framework-icon"></div> <div><div class="contents-info"><div><img alt="user profile"> <h4> </h4></div></div> <h3> </h3></div></div> <div class="content-main default-shadow"><p> </p></div> <div class="comment-input"><textarea class="default-shadow"></textarea> <button class="default-shadow">comment</button></div> <div class="contents-container default-shadow"><h2>Comment</h2> <ol><!></ol></div>',1);function Jt(J,m){rt(m,!0);let e=_(void 0),c=_(g([])),v=_(void 0),f=_("");const w=m.data.id,K=async()=>{if(!w){console.log("no content id");return}const r=await fetch(`/api/contents/${w}`,{method:"get"});if(!r.ok)return;const s=await r.json();d(e,g(s)),console.log(s)},M=async()=>{if(!t(e)){console.log("no content");return}const r=await fetch(`/api/comments?contentID=${t(e).id}`,{method:"get"});if(!r.ok)return;const s=await r.json();d(c,g(s))};pt(()=>{const r=sessionStorage.getItem("user");if(!r)return;const s=JSON.parse(r);d(v,g(s)),K()}),st(()=>{t(e)&&M()});var N=z(),L=I(N);{var P=r=>{var s=ht(),l=I(s),y=a(l),b=a(y),Q=a(b,!0);o(b);var U=n(b,2);o(y);var S=n(y,2),k=a(S),A=a(k),O=a(A),H=n(O,2),V=a(H,!0);o(H),o(A),o(k);var R=n(k,2),W=a(R,!0);B(()=>h(W,t(e)&&it(t(e).date,"yyyy/MM/dd"))),o(R),o(S),o(l);var x=n(l,2),T=a(x),X=a(T,!0);o(T),o(x);var C=n(x,2),D=a(C);vt(D);var Y=n(D,2);Y.__click=[ut,v,f,w,M],o(C);var $=n(C,2),q=n(a($),2),Z=a(q);{var tt=i=>{var p=z(),at=I(p);ct(at,17,()=>t(c),j=>j.id,(j,ot)=>{mt(j,{get comment(){return t(ot)}})}),u(i,p)},et=i=>{var p=_t();u(i,p)};E(Z,i=>{Array.isArray(t(c))&&t(c)[0]?i(tt):i(et,!1)})}o(q),o($),B(()=>{dt(l,`content-info ${t(e).framework??""}-shadow`),h(Q,t(e).title),F(U,"src",`/public/${t(e).framework??""}.svg`),F(O,"src",t(e).profile),h(V,t(e).username),h(X,t(e).content)}),lt(D,()=>t(f),i=>d(f,i)),u(r,s)};E(L,r=>{t(e)&&r(P)})}u(J,N),nt()}ft(["click"]);export{Jt as component};
